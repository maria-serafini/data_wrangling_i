---
title: "data_manipulation"
output: github_document
---

```{r setup, include=FALSE}
library(tidyverse)
```


importa datasets
```{r}
litters_df <-
  read_csv("data/FAS_litters.csv", na = c("NA", ".", ""))
litters_df <-
  janitor::clean_names(litters_df)

pups_df <-
  read_csv("data/FAS_pups.csv", skip = 3, na = c("NA", ".", ""))
pups_df <-
  janitor::clean_names(pups_df)
```


## 'select'

'select' selects variables from dataframe

```{r}
select(litters_df, group, litter_number, gd0_weight)
```

select a range
```{r}
select(litters_df, group:gd_of_birth)
```

select by removal
```{r}
select(litters_df, -group)
select(litters_df, -group:gd_of_birth)
```

select by prefix
```{r}
select(litters_df, group, starts_with("gd"))
```

rearrange by selecting
```{r}
select(litters_df, starts_with("gd"), group)
select(litters_df, litter_number, everything()) #gives litter number first and then everything in dataset

relocate(litters_df, litter_number)
```

rename by selecting
```{r}
select(litters_df, GROUP = group, everything()) #renaming variable group to GROUP and then keeping everything else
rename(litters_df, GROUP = group) #renaming variable group to GROUP
```

what if I only select one variable?
```{r}
select(litters_df, group) #selecting one variable, give df with just that variable

pull(litters_df, group) #gives vector, NEVER USE THIS, don't pull variable out of df to manipulate
litters_df$group #same as pull above
```

select learning assessment
```{r}
select(pups_df, litter_number, sex, pd_ears)
```

## 'filter'

use 'filter()' to filter out rows

```{r}
filter(litters_df, gd_of_birth == 20, pups_born_alive == 6) #'==' is this variable equal to this, remove FALSE, keep TRUE
```

look for more than two pups alive
```{r}
filter(litters_df, pups_born_alive > 5) #gives rows greater than 5
filter(litters_df, pups_born_alive >= 5) #gives rows greater than or equal to 5
filter(litters_df, pups_born_alive <= 5)
```

look for non-matches
```{r}
filter(litters_df, pups_born_alive != 6) #removes rows of pups_born alive
```

match to a set
```{r}
filter(litters_df, group %in% c("Con7,", "Con8"))
```

filter out missing rows with 'drop_na()'
```{r}
drop_na(litters_df) #drops na for entire dataset
drop_na(litters_df, gd0_weight) ##drops na for variable
```

filter learning assesment
```{r}
filter(pups_df, sex == 1)
filter(pups_df, pd_walk < 11, sex == 2)
```

## 'mutate'

use 'mutate()' to create or modify variables
```{r}
mutate(
  litters_df,
  wt_gain = gd18_weight - gd0_weight, #adds new variable to dataframe that subtracts value of gd0_weight from value of gd18_weight
  group = str_to_lower(group) #makes lowercase
)
```

## 'arrange'

'arrange()' arranges things
```{r}
arrange(litters_df, pups_born_alive) #arranges in ascending order
arrange(litters_df, desc(pups_born_alive)) #arranges in descending order 

arrange(litters_df, group, pups_born_alive)
arrange(litters_df, desc(group), pups_born_alive)

arrange(litters_df, gd0_weight) #NAs are placed at end
```



